import n,{Component as r,useMemo as t,useRef as e,useEffect as o}from"react";import u from"react/jsx-runtime";import i from"react/jsx-dev-runtime";import{useSyncExternalStore as f}from"use-sync-external-store/shim/index.js";import{Signal as c,signal as a,computed as p,effect as l}from"@preact/signals-core";export{Signal,batch,computed,effect,signal}from"@preact/signals-core";var s=[],m=Symbol.for("react.element"),v=Symbol.for("react.memo"),y=new Map,b="function"==typeof Proxy,g={apply:function(n,r,e){var o=t(h,s);f(o.subscribe,o.getSnapshot,o.getSnapshot);var u=o.updater.S();try{return n.apply(r,e)}catch(n){throw n}finally{u()}}};function d(n){return y.get(n)||function(n){if(b){var r=new Proxy(n,g);y.set(n,r);y.set(r,r);return r}var t=function(){return g.apply(n,void 0,arguments)};y.set(n,t);y.set(t,t);return t}(n)}function h(){var n,r,t=0,e=l(function(){n=this});n.c=function(){t=t+1|0;if(r)r()};return{updater:n,subscribe:function(n){r=n;return function(){t=t+1|0;r=void 0;e()}},getSnapshot:function(){return t}}}function x(n){if("function"!=typeof n)return n;else return function(t,e){var o=[].slice.call(arguments,2);if("function"==typeof t&&!(t instanceof r))return n.call.apply(n,[n,d(t),e].concat(o));if(t&&"object"==typeof t&&t.$$typeof===v){t.type=d(t.type);return n.call.apply(n,[n,t,e].concat(o))}if("string"==typeof t&&e)for(var u in e){var i=e[u];if("children"!==u&&i instanceof c)e[u]=i.value}return n.call.apply(n,[n,t,e].concat(o))}}var j=u,S=i;n.createElement=x(n.createElement);S.jsx&&(S.jsx=x(S.jsx));j.jsx&&(j.jsx=x(j.jsx));S.jsxs&&(S.jsxs=x(S.jsxs));j.jsxs&&(j.jsxs=x(j.jsxs));S.jsxDEV&&(S.jsxDEV=x(S.jsxDEV));j.jsxDEV&&(j.jsxDEV=x(j.jsxDEV));Object.defineProperties(c.prototype,{$$typeof:{configurable:!0,value:m},type:{configurable:!0,value:d(function(n){return n.data.value})},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});function useSignal(n){return t(function(){return a(n)},s)}function useComputed(n){var r=e(n);r.current=n;return t(function(){return p(function(){return r.current()})},s)}function useSignalEffect(n){var r=e(n);r.current=n;o(function(){return l(function(){return r.current()})},s)}export{useComputed,useSignal,useSignalEffect};//# sourceMappingURL=signals.module.js.map
