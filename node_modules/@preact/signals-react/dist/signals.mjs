import t,{Component as n,useMemo as e,useRef as r,useEffect as o}from"react";import i from"react/jsx-runtime";import c from"react/jsx-dev-runtime";import{useSyncExternalStore as f}from"use-sync-external-store/shim/index.js";import{Signal as u,signal as a,computed as s,effect as l}from"@preact/signals-core";export{Signal,batch,computed,effect,signal}from"@preact/signals-core";const p=[],m=Symbol.for("react.element"),y=Symbol.for("react.memo"),b=new Map,g="function"==typeof Proxy,d={apply(t,n,r){const o=e(x,p);f(o.subscribe,o.getSnapshot,o.getSnapshot);const i=o.updater.S();try{return t.apply(n,r)}catch(t){throw t}finally{i()}}};function h(t){return b.get(t)||function(t){if(g){const n=new Proxy(t,d);b.set(t,n);b.set(n,n);return n}const n=function(){return d.apply(t,void 0,arguments)};b.set(t,n);b.set(n,n);return n}(t)}function x(){let t,n,e=0,r=l(function(){t=this});t.c=function(){e=e+1|0;if(n)n()};return{updater:t,subscribe(t){n=t;return function(){e=e+1|0;n=void 0;r()}},getSnapshot:()=>e}}function v(t){if("function"!=typeof t)return t;else return function(e,r,...o){if("function"==typeof e&&!(e instanceof n))return t.call(t,h(e),r,...o);if(e&&"object"==typeof e&&e.$$typeof===y){e.type=h(e.type);return t.call(t,e,r,...o)}if("string"==typeof e&&r)for(let t in r){let n=r[t];if("children"!==t&&n instanceof u)r[t]=n.value}return t.call(t,e,r,...o)}}const j=i,S=c;t.createElement=v(t.createElement);S.jsx&&(S.jsx=v(S.jsx));j.jsx&&(j.jsx=v(j.jsx));S.jsxs&&(S.jsxs=v(S.jsxs));j.jsxs&&(j.jsxs=v(j.jsxs));S.jsxDEV&&(S.jsxDEV=v(S.jsxDEV));j.jsxDEV&&(j.jsxDEV=v(j.jsxDEV));Object.defineProperties(u.prototype,{$$typeof:{configurable:!0,value:m},type:{configurable:!0,value:h(function({data:t}){return t.value})},props:{configurable:!0,get(){return{data:this}}},ref:{configurable:!0,value:null}});function useSignal(t){return e(()=>a(t),p)}function useComputed(t){const n=r(t);n.current=t;return e(()=>s(()=>n.current()),p)}function useSignalEffect(t){const n=r(t);n.current=t;o(()=>l(()=>n.current()),p)}export{useComputed,useSignal,useSignalEffect};//# sourceMappingURL=signals.mjs.map
