!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.sockette=e()}(this,function(){function n(){}return function(e,o){var t,c=0,i=1,u={},f=(o=o||{}).maxAttempts||1/0;return u.open=function(){(t=new WebSocket(e,o.protocols||[])).onmessage=o.onmessage||n,t.onopen=function(e){(o.onopen||n)(e),c=0},t.onclose=function(e){1e3===e.code||1001===e.code||1005===e.code||u.reconnect(e),(o.onclose||n)(e)},t.onerror=function(e){e&&"ECONNREFUSED"===e.code?u.reconnect(e):(o.onerror||n)(e)}},u.reconnect=function(e){i&&c++<f?i=setTimeout(function(){(o.onreconnect||n)(e),u.open()},o.timeout||1e3):(o.onmaximum||n)(e)},u.json=function(n){t.send(JSON.stringify(n))},u.send=function(n){t.send(n)},u.close=function(n,e){i=clearTimeout(i),t.close(n||1e3,e)},u.open(),u}});