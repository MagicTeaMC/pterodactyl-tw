import{useFloating as e,getOverflowAncestors as n}from"@floating-ui/react-dom";export*from"@floating-ui/react-dom";import*as t from"react";import{useLayoutEffect as r,useEffect as o,useRef as u}from"react";import{createPortal as c}from"react-dom";import{hideOthers as i}from"aria-hidden";var l="undefined"!=typeof document?r:o;function s(){const e=new Map;return{emit(n,t){var r;null==(r=e.get(n))||r.forEach((e=>e(t)))},on(n,t){e.set(n,[...e.get(n)||[],t])},off(n,t){e.set(n,(e.get(n)||[]).filter((e=>e!==t)))}}}let a=!1,f=0;const d=()=>"floating-ui-"+f++;const v=t["useId".toString()],m=null!=v?v:function(){const[e,n]=t.useState((()=>a?d():void 0));return l((()=>{null==e&&n(d())}),[]),t.useEffect((()=>{a||(a=!0)}),[]),e},p=t.createContext(null),g=t.createContext(null),b=()=>{var e,n;return null!=(e=null==(n=t.useContext(p))?void 0:n.id)?e:null},h=()=>t.useContext(g),y=()=>{const e=m(),n=h(),t=b();return l((()=>{const r={id:e,parentId:t};return null==n||n.addNode(r),()=>{null==n||n.removeNode(r)}}),[n,e,t]),e},E=e=>{let{children:n,id:r}=e;const o=b();return t.createElement(p.Provider,{value:t.useMemo((()=>({id:r,parentId:o})),[r,o])},n)},w=e=>{let{children:n}=e;const r=t.useRef([]),o=t.useCallback((e=>{r.current=[...r.current,e]}),[]),u=t.useCallback((e=>{r.current=r.current.filter((n=>n!==e))}),[]),c=t.useState((()=>s()))[0];return t.createElement(g.Provider,{value:t.useMemo((()=>({nodesRef:r,addNode:o,removeNode:u,events:c})),[r,o,u,c])},n)};function R(e){var n;return null!=(n=null==e?void 0:e.ownerDocument)?n:document}function x(e){var n;return null!=(n=R(e).defaultView)?n:window}function L(e){return!!e&&e instanceof x(e).Element}function k(e){return!!e&&e instanceof x(e).HTMLElement}function I(n){let{open:r=!1,onOpenChange:o=(()=>{}),whileElementsMounted:u,placement:c,middleware:i,strategy:a,nodeId:f}=void 0===n?{}:n;const d=h(),v=t.useRef(null),m=t.useRef({}),p=t.useState((()=>s()))[0],g=e({placement:c,middleware:i,strategy:a,whileElementsMounted:u}),b=t.useMemo((()=>({...g.refs,domReference:v})),[g.refs]),y=t.useMemo((()=>({...g,refs:b,dataRef:m,nodeId:f,events:p,open:r,onOpenChange:o})),[g,f,p,r,o,b]);l((()=>{const e=null==d?void 0:d.nodesRef.current.find((e=>e.id===f));e&&(e.context=y)}));const{reference:E}=g,w=t.useCallback((e=>{(L(e)||null===e)&&(y.refs.domReference.current=e),E(e)}),[E,y.refs]);return t.useMemo((()=>({...g,context:y,refs:b,reference:w})),[g,b,y,w])}function T(e,n,t){const r=new Map;return{..."floating"===t&&{tabIndex:-1},...e,...n.map((e=>e?e[t]:null)).concat(e).reduce(((e,n)=>n?(Object.entries(n).forEach((n=>{let[t,o]=n;if(0===t.indexOf("on")){var u;if(r.has(t)||r.set(t,[]),"function"==typeof o)null==(u=r.get(t))||u.push(o);e[t]=function(){for(var e,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];null==(e=r.get(t))||e.forEach((e=>e(...o)))}}else e[t]=o})),e):e),{})}}const C=function(e){return void 0===e&&(e=[]),{getReferenceProps:n=>T(n,e,"reference"),getFloatingProps:n=>T(n,e,"floating"),getItemProps:n=>T(n,e,"item")}};function A(e,n){var t;let r=null!=(t=e.filter((e=>{var t;return e.parentId===n&&(null==(t=e.context)?void 0:t.open)})))?t:[],o=r;for(;o.length;){var u;o=null!=(u=e.filter((e=>{var n;return null==(n=o)?void 0:n.some((n=>{var t;return e.parentId===n.id&&(null==(t=e.context)?void 0:t.open)}))})))?u:[],r=r.concat(o)}return r}function O(e){let n,{restMs:t=0,buffer:r=.5,debug:o=null}=void 0===e?{}:e,u=!1;return e=>{let{x:o,y:c,placement:i,refs:l,onClose:s,nodeId:a,tree:f,leave:d=!1}=e;return function(e){var v,m;function p(){clearTimeout(n),s()}if(clearTimeout(n),e.pointerType&&"mouse"!==e.pointerType)return;const{clientX:g,clientY:b}=e,h="composedPath"in e?e.composedPath()[0]:e.target;if("pointermove"===e.type&&null!=(v=l.domReference.current)&&v.contains(h))return;if(f&&A(f.nodesRef.current,a).some((e=>{let{context:n}=e;return null==n?void 0:n.open})))return;if(null!=(m=l.floating.current)&&m.contains(h)&&!d)return void(u=!0);if(!l.domReference.current||!l.floating.current||null==i||null==o||null==c)return;const y=l.domReference.current.getBoundingClientRect(),E=l.floating.current.getBoundingClientRect(),w=i.split("-")[0],R=o>E.right-E.width/2,x=c>E.bottom-E.height/2;if("top"===w&&c>=y.bottom-1||"bottom"===w&&c<=y.top+1||"left"===w&&o>=y.right-1||"right"===w&&o<=y.left+1)return p();switch(w){case"top":if(g>=E.left&&g<=E.right&&b>=E.top&&b<=y.top+1)return;break;case"bottom":if(g>=E.left&&g<=E.right&&b>=y.bottom-1&&b<=E.bottom)return;break;case"left":if(g>=E.left&&g<=y.left+1&&b>=E.top&&b<=E.bottom)return;break;case"right":if(g>=y.right-1&&g<=E.right&&b>=E.top&&b<=E.bottom)return}if(u)return p();const L=function(e){let[n,t]=e;const o=E.width>y.width,u=E.height>y.height;switch(w){case"top":return[[o?n+r/2:R?n+4*r:n-4*r,t+r+1],[o?n-r/2:R?n+4*r:n-4*r,t+r+1],...[[E.left,R||o?E.bottom-r:E.top],[E.right,R?o?E.bottom-r:E.top:E.bottom-r]]];case"bottom":return[[o?n+r/2:R?n+4*r:n-4*r,t-r],[o?n-r/2:R?n+4*r:n-4*r,t-r],...[[E.left,R||o?E.top+r:E.bottom],[E.right,R?o?E.top+r:E.bottom:E.top+r]]];case"left":{const e=[n+r+1,u?t+r/2:x?t+4*r:t-4*r],o=[n+r+1,u?t-r/2:x?t+4*r:t-4*r];return[...[[x||u?E.right-r:E.left,E.top],[x?u?E.right-r:E.left:E.right-r,E.bottom]],e,o]}case"right":return[[n-r,u?t+r/2:x?t+4*r:t-4*r],[n-r,u?t-r/2:x?t+4*r:t-4*r],...[[x||u?E.left+r:E.right,E.top],[x?u?E.left+r:E.right:E.left+r,E.bottom]]]}}([o,c]);!function(e,n){const[t,r]=e;let o=!1;const u=n.length;for(let e=0,c=u-1;e<u;c=e++){const[u,i]=n[e]||[0,0],[l,s]=n[c]||[0,0];i>=r!=s>=r&&t<=(l-u)*(r-i)/(s-i)+u&&(o=!o)}return o}([g,b],L)?p():t&&(n=setTimeout(s,t))}}}const M="floating-ui-root",D=function(e){let{id:n=M,enabled:r=!0}=void 0===e?{}:e;const[o,u]=t.useState(null);return l((()=>{if(!r)return;const e=document.getElementById(n);if(e)u(e);else{const e=document.createElement("div");e.id=n,u(e),document.body.contains(e)||document.body.appendChild(e)}}),[n,r]),o},P=e=>{let{children:n,id:t=M,root:r=null}=e;const o=D({id:t,enabled:!r});return r?c(n,r):o?c(n,o):null};function S(){return S=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},S.apply(this,arguments)}const F="data-floating-ui-scroll-lock";const K=t.forwardRef((function(e,n){let{lockScroll:r=!1,...o}=e;return l((()=>{var e,n,t,o;if(!r)return;if(document.body.hasAttribute(F))return;document.body.setAttribute(F,"");const u=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",c=window.innerWidth-document.documentElement.clientWidth;if(!/iP(hone|ad|od)|iOS/.test(function(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}()))return Object.assign(document.body.style,{overflow:"hidden",[u]:c+"px"}),()=>{document.body.removeAttribute(F),Object.assign(document.body.style,{overflow:"",[u]:""})};const i=null!=(e=null==(n=window.visualViewport)?void 0:n.offsetLeft)?e:0,l=null!=(t=null==(o=window.visualViewport)?void 0:o.offsetTop)?t:0,s=window.pageXOffset,a=window.pageYOffset;return Object.assign(document.body.style,{position:"fixed",overflow:"hidden",top:-(a-Math.floor(l))+"px",left:-(s-Math.floor(i))+"px",right:"0",[u]:c+"px"}),()=>{Object.assign(document.body.style,{position:"",overflow:"",top:"",left:"",right:"",[u]:""}),document.body.removeAttribute(F),window.scrollTo(s,a)}}),[r]),t.createElement("div",S({ref:n},o,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}}))}));function j(e){let n=e.activeElement;for(;null!=(null==(t=n)||null==(r=t.shadowRoot)?void 0:r.activeElement);){var t,r;n=n.shadowRoot.activeElement}return n}const N="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function B(e){return k(e)&&e.matches(N)}function V(e){e.preventDefault(),e.stopPropagation()}function U(e){const n=u(e);return l((()=>{n.current=e})),n}function H(e){requestAnimationFrame((()=>{null==e||e.focus()}))}const X=t.forwardRef((function(e,n){return t.createElement("span",S({},e,{ref:n,tabIndex:0,style:{position:"fixed",opacity:"0",pointerEvents:"none",outline:"0"}}))}));function Y(e){let{context:{refs:n,nodeId:r,onOpenChange:o,dataRef:u,events:c},children:l,order:s=["content"],endGuard:a=!0,preventTabbing:f=!1,initialFocus:d=0,returnFocus:v=!0,modal:m=!0}=e;const p=U(s),g=U(o),b=h(),y=t.useCallback((()=>p.current.map((e=>{return"reference"===e?n.domReference.current:n.floating.current&&"floating"===e?n.floating.current:"content"===e?Array.from(null!=(t=null==(r=n.floating.current)?void 0:r.querySelectorAll("select:not([disabled]),a[href],button:not([disabled]),[tabindex],iframe,object,embed,area[href],audio[controls],video[controls],input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])"))?t:[]):null;var t,r})).flat().filter((e=>{if(e===n.floating.current||e===n.domReference.current)return!0;if(k(e)){var t;return"-"!==(null!=(t=e.getAttribute("tabindex"))?t:"0")[0].trim()}}))),[p,n]);t.useEffect((()=>{if(!m)return;const e=0===y().filter((e=>e!==n.floating.current&&e!==n.domReference.current)).length;function t(t){if("Tab"===t.key){(f||e)&&V(t);const r=y(),o="composedPath"in t?t.composedPath()[0]:t.target;"reference"===p.current[0]&&o===n.domReference.current&&(V(t),t.shiftKey?H(r[r.length-1]):H(r[1])),"floating"===p.current[1]&&o===n.floating.current&&t.shiftKey&&(V(t),H(r[0]))}}const r=R(n.floating.current);return r.addEventListener("keydown",t),()=>{r.removeEventListener("keydown",t)}}),[f,m,y,p,n]),t.useEffect((()=>{function e(e){var t,o;const u=e.relatedTarget,c=!(null!=(t=n.floating.current)&&t.contains(u)),i=L(n.domReference.current)&&!n.domReference.current.contains(u),l=b&&A(b.nodesRef.current,r).length>0,s=b&&e.currentTarget===n.domReference.current&&(null==(o=function(e,n){var t;let r=[],o=null==(t=e.find((e=>e.id===n)))?void 0:t.parentId;for(;o;){const n=e.find((e=>e.id===o));o=null==n?void 0:n.parentId,n&&(r=r.concat(n))}return r}(b.nodesRef.current,r))?void 0:o.some((e=>{var n,t;return null==(n=e.context)||null==(t=n.refs.floating.current)?void 0:t.contains(u)})));c&&i&&!l&&!s&&g.current(!1)}const t=n.floating.current,o=n.domReference.current;if(t&&k(o)){let n;return!m&&t.addEventListener("focusout",e),!m&&o.addEventListener("focusout",e),m&&(n=p.current.includes("reference")?i([o,t]):i(t)),()=>{!m&&t.removeEventListener("focusout",e),!m&&o.removeEventListener("focusout",e),null==n||n()}}}),[r,b,m,g,p,u,y,n]),t.useEffect((()=>{if(f)return;let e=v;const t=n.floating.current,r=j(R(t));var o;if("number"==typeof d)H(null!=(o=y()[d])?o:t);else if(k(null==d?void 0:d.current)){var u;H(null!=(u=d.current)?u:t)}function i(){e=!1}return c.on("dismiss",i),()=>{c.off("dismiss",i),e&&k(r)&&H(r)}}),[f,y,d,v,n,c]);const E=()=>{var e;return"combobox"===(null==(e=n.domReference.current)?void 0:e.getAttribute("role"))&&B(n.domReference.current)};return t.createElement(t.Fragment,null,m&&t.createElement(X,{onFocus:e=>{if(E())return;V(e);const n=y();"reference"===s[0]?H(n[0]):H(n[n.length-1])}}),t.cloneElement(l,s.includes("floating")?{tabIndex:0}:{}),m&&a&&t.createElement(X,{onFocus:e=>{E()||(V(e),H(y()[0]))}}))}function q(e){const n=u();return l((()=>{n.current=e}),[e]),n.current}function W(e,n,t){return t&&"mouse"!==t?0:"number"==typeof e?e:null==e?void 0:e[n]}const z=function(e,n){let{enabled:r=!0,delay:o=0,handleClose:u=null,mouseOnly:c=!1,restMs:i=0}=void 0===n?{}:n;const{open:s,onOpenChange:a,dataRef:f,events:d,refs:v}=e,m=h(),p=b(),g=U(a),y=U(u),E=q(s),w=t.useRef(),x=t.useRef(),I=t.useRef(),T=t.useRef(),C=t.useRef(!0),A=t.useRef(!1);t.useEffect((()=>{if(r)return d.on("dismiss",e),()=>{d.off("dismiss",e)};function e(){clearTimeout(x.current),clearTimeout(T.current),C.current=!0}}),[r,d,v]),t.useEffect((()=>{if(!r||!y.current)return;function e(){var e;null!=(e=f.current.openEvent)&&e.type.includes("mouse")&&g.current(!1)}const n=R(v.floating.current).documentElement;return n.addEventListener("mouseleave",e),()=>{n.removeEventListener("mouseleave",e)}}),[v,g,r,y,f]);const O=t.useCallback((function(e){void 0===e&&(e=!0);const n=W(o,"close",w.current);n&&!I.current?(clearTimeout(x.current),x.current=setTimeout((()=>g.current(!1)),n)):e&&(clearTimeout(x.current),g.current(!1))}),[o,g]),M=t.useCallback((()=>{I.current&&(R(v.floating.current).removeEventListener("pointermove",I.current),I.current=void 0)}),[v]),D=t.useCallback((()=>{R(v.floating.current).body.style.pointerEvents="",A.current=!1}),[v]);if(t.useEffect((()=>{if(!r)return;function n(e){if(clearTimeout(x.current),C.current=!1,s||c&&"mouse"!==w.current||i>0&&0===W(o,"open"))return;f.current.openEvent=e;const n=W(o,"open",w.current);n?x.current=setTimeout((()=>{g.current(!0)}),n):g.current(!0)}function t(n){var t,r;if("click"===(null==(t=f.current.openEvent)?void 0:t.type)||"pointerdown"===(null==(r=f.current.openEvent)?void 0:r.type))return;const o=R(v.floating.current);if(clearTimeout(T.current),y.current)return clearTimeout(x.current),I.current&&o.removeEventListener("pointermove",I.current),I.current=y.current({...e,tree:m,x:n.clientX,y:n.clientY,onClose(){M(),O()}}),void o.addEventListener("pointermove",I.current);O()}function u(n){null==y.current||y.current({...e,tree:m,x:n.clientX,y:n.clientY,leave:!0,onClose(){M(),O()}})(n)}const l=v.floating.current,a=v.domReference.current;return L(a)?(s&&a.addEventListener("mouseleave",u),null==l||l.addEventListener("mouseleave",u),a.addEventListener("mousemove",n,{once:!0}),a.addEventListener("mouseenter",n),a.addEventListener("mouseleave",t),()=>{s&&a.removeEventListener("mouseleave",u),null==l||l.removeEventListener("mouseleave",u),a.removeEventListener("mousemove",n),a.removeEventListener("mouseenter",n),a.removeEventListener("mouseleave",t)}):void 0}),[r,O,e,o,y,f,c,g,s,m,i,M,v]),l((()=>{if(r&&s&&y.current){R(v.floating.current).body.style.pointerEvents="none",A.current=!0;const t=v.domReference.current,r=v.floating.current;if(k(t)&&r){var e,n;const o=null==m||null==(e=m.nodesRef.current.find((e=>e.id===p)))||null==(n=e.context)?void 0:n.refs.floating.current;return o&&(o.style.pointerEvents=""),t.style.pointerEvents="auto",r.style.pointerEvents="auto",()=>{t.style.pointerEvents="",r.style.pointerEvents=""}}}}),[r,s,p,v,m,y,f]),l((()=>{E&&!s&&(w.current=void 0,M(),D())})),t.useEffect((()=>()=>{M(),clearTimeout(x.current),clearTimeout(T.current),A.current&&D()}),[M,D]),!r)return{};function P(e){w.current=e.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove(){s||0===i||(clearTimeout(T.current),T.current=setTimeout((()=>{C.current||a(!0)}),i))}},floating:{onMouseEnter(){clearTimeout(x.current)},onMouseLeave(){O(!1)}}}},G=t.createContext({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),J=()=>t.useContext(G),Q=e=>{let{children:n,delay:r}=e;const[o,u]=t.useState({delay:r,initialDelay:r,currentId:null}),c=t.useCallback((e=>{u((n=>({...n,currentId:e})))}),[]);return t.createElement(G.Provider,{value:t.useMemo((()=>({...o,setState:u,setCurrentId:c})),[o,u,c])},n)},Z=(e,n)=>{let{open:r,onOpenChange:o}=e,{id:u}=n;const{currentId:c,initialDelay:i,setState:l}=J(),s=U(o);t.useEffect((()=>{c&&s.current&&(l((e=>({...e,delay:{open:1,close:W(i,"close")}}))),c!==u&&s.current(!1))}),[u,s,l,c,i]),t.useEffect((()=>{!r&&c===u&&s.current&&(s.current(!1),l((e=>({...e,delay:i,currentId:null}))))}),[r,l,c,u,s,i])},$=function(e,n){let{open:t}=e,{enabled:r=!0,role:o="dialog"}=void 0===n?{}:n;const u=m(),c=m(),i={id:u,role:o};return r?"tooltip"===o?{reference:{"aria-describedby":t?u:void 0},floating:i}:{reference:{"aria-expanded":t?"true":"false","aria-haspopup":o,"aria-controls":t?u:void 0,..."listbox"===o&&{role:"combobox"},..."menu"===o&&{id:c}},floating:{...i,..."menu"===o&&{"aria-labelledby":c}}}:{}},_=function(e,n){let{open:r,onOpenChange:o,dataRef:u,refs:c}=e,{enabled:i=!0,pointerDown:l=!1,toggle:s=!0,ignoreMouse:a=!1}=void 0===n?{}:n;const f=t.useRef();function d(){var e;return"BUTTON"===(null==(e=c.domReference.current)?void 0:e.tagName)}function v(){return B(c.domReference.current)}return i?{reference:{onPointerDown(e){0===e.button&&(f.current=e.pointerType,"mouse"===f.current&&a||l&&(r?!s||u.current.openEvent&&"pointerdown"!==u.current.openEvent.type||o(!1):o(!0),u.current.openEvent=e.nativeEvent))},onClick(e){l&&f.current?f.current=void 0:"mouse"===f.current&&a||(r?!s||u.current.openEvent&&"click"!==u.current.openEvent.type||o(!1):o(!0),u.current.openEvent=e.nativeEvent)},onKeyDown(e){f.current=void 0,d()||(" "!==e.key||v()||e.preventDefault(),"Enter"===e.key&&(r?s&&o(!1):o(!0)))},onKeyUp(e){d()||v()||" "===e.key&&(r?s&&o(!1):o(!0))}}}:{}};function ee(e,n){if(null==n)return!1;if("composedPath"in e)return e.composedPath().includes(n);const t=e;return null!=t.target&&n.contains(t.target)}const ne=function(e,r){let{open:o,onOpenChange:u,refs:c,events:i,nodeId:l}=e,{enabled:s=!0,escapeKey:a=!0,outsidePointerDown:f=!0,referencePointerDown:d=!1,ancestorScroll:v=!1,bubbles:m=!0}=void 0===r?{}:r;const p=h(),g=U(u),b=t.useCallback((()=>{var e;return null==(e=c.floating.current)?void 0:e.contains(j(R(c.floating.current)))}),[c]);return t.useEffect((()=>{if(!o||!s)return;function e(e){if("Escape"===e.key){if(!m&&!b())return;i.emit("dismiss"),g.current(!1),k(c.domReference.current)&&c.domReference.current.focus()}}function t(e){const n=p&&A(p.nodesRef.current,l).some((n=>{var t;return ee(e,null==(t=n.context)?void 0:t.refs.floating.current)}));ee(e,c.floating.current)||ee(e,c.domReference.current)||n||(m||b())&&(i.emit("dismiss"),g.current(!1))}function r(){g.current(!1)}const u=R(c.floating.current);a&&u.addEventListener("keydown",e),f&&u.addEventListener("mousedown",t);const d=(v?[...L(c.reference.current)?n(c.reference.current):[],...L(c.floating.current)?n(c.floating.current):[]]:[]).filter((e=>{var n;return e!==(null==(n=u.defaultView)?void 0:n.visualViewport)}));return d.forEach((e=>e.addEventListener("scroll",r,{passive:!0}))),()=>{a&&u.removeEventListener("keydown",e),f&&u.removeEventListener("mousedown",t),d.forEach((e=>e.removeEventListener("scroll",r)))}}),[a,f,i,p,l,o,g,v,s,m,b,c]),s?{reference:{onPointerDown(){d&&(i.emit("dismiss"),u(!1))}}}:{}},te=function(e,n){let{open:r,onOpenChange:o,dataRef:u,refs:c,events:i}=e,{enabled:l=!0,keyboardOnly:s=!0}=void 0===n?{}:n;const a=t.useRef(""),f=t.useRef(!1);return t.useEffect((()=>{var e;if(!l)return;const n=R(c.floating.current),t=null!=(e=n.defaultView)?e:window;function o(){a.current&&c.domReference.current===j(n)&&(f.current=!r)}function u(){setTimeout((()=>{f.current=!1,a.current=""}))}return t.addEventListener("focus",u),t.addEventListener("blur",o),()=>{t.removeEventListener("focus",u),t.removeEventListener("blur",o)}}),[c,r,l]),t.useEffect((()=>{if(l)return i.on("dismiss",e),()=>{i.off("dismiss",e)};function e(){f.current=!0}}),[i,l]),l?{reference:{onPointerDown(e){let{pointerType:n}=e;a.current=n,f.current=!(!n||!s)},onFocus(e){var n,t,r;f.current||"focus"===e.type&&"mousedown"===(null==(n=u.current.openEvent)?void 0:n.type)&&null!=(t=c.domReference.current)&&t.contains(null==(r=u.current.openEvent)?void 0:r.target)||(u.current.openEvent=e.nativeEvent,o(!0))},onBlur(e){var n,t;const r=e.relatedTarget;null!=(n=c.floating.current)&&n.contains(r)||null!=(t=c.domReference.current)&&t.contains(r)||(f.current=!1,o(!1))}}}:{}};function re(e,n){return n<0||n>=e.current.length}function oe(e,n){let{startingIndex:t=-1,decrement:r=!1,disabledIndices:o}=void 0===n?{}:n;const u=e.current;let c=t;do{var i,l;c+=r?-1:1}while(c>=0&&c<=u.length-1&&(o?o.includes(c):null==u[c]||(null==(i=u[c])?void 0:i.hasAttribute("disabled"))||"true"===(null==(l=u[c])?void 0:l.getAttribute("aria-disabled"))));return c}function ue(e,n,t){switch(e){case"vertical":return n;case"horizontal":return t;default:return n||t}}function ce(e,n){return ue(n,"ArrowUp"===e||"ArrowDown"===e,"ArrowLeft"===e||"ArrowRight"===e)}function ie(e,n,t){return ue(n,"ArrowDown"===e,t?"ArrowLeft"===e:"ArrowRight"===e)||"Enter"===e||" "==e||""===e}function le(e,n){return oe(e,{disabledIndices:n})}function se(e,n){return oe(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:n})}const ae=function(e,n){let{open:r,onOpenChange:o,refs:u}=e,{listRef:c,activeIndex:i,onNavigate:s,enabled:a=!0,selectedIndex:f=null,allowEscape:d=!1,loop:v=!1,nested:m=!1,rtl:p=!1,virtual:g=!1,focusItemOnOpen:y="auto",focusItemOnHover:E=!0,openOnArrowKeyDown:w=!0,disabledIndices:x=(w?void 0:[]),orientation:L="vertical"}=void 0===n?{listRef:{current:[]},activeIndex:null,onNavigate:()=>{}}:n;const I=b(),T=h(),C=q(r),A=t.useRef(y),O=t.useRef(null!=f?f:-1),M=t.useRef(null),D=U(q(s)),P=U(s),S=U(x),F=t.useRef(!1),K=t.useRef(-1),[N,B]=t.useState(),H=t.useCallback(((e,n)=>{K.current=requestAnimationFrame((()=>{var t,r;g?B(null==(t=e.current[n.current])?void 0:t.id):null==(r=e.current[n.current])||r.focus({preventScroll:!0})}))}),[g]);function X(e){if(F.current=!0,m&&function(e,n,t){return ue(n,t?"ArrowRight"===e:"ArrowLeft"===e,"ArrowUp"===e)}(e.key,L,p))return V(e),o(!1),void(k(u.domReference.current)&&u.domReference.current.focus());const n=O.current,t=le(c,x),i=se(c,x);if("Home"===e.key&&(O.current=t,s(O.current)),"End"===e.key&&(O.current=i,s(O.current)),ce(e.key,L)){if(V(e),r&&!g&&j(e.currentTarget.ownerDocument)===e.currentTarget)return O.current=ie(e.key,L,p)?t:i,void s(O.current);ie(e.key,L,p)?O.current=v?n>=i?d&&n!==c.current.length?-1:t:oe(c,{startingIndex:n,disabledIndices:x}):Math.min(i,oe(c,{startingIndex:n,disabledIndices:x})):O.current=v?n<=t?d&&-1!==n?c.current.length:i:oe(c,{startingIndex:n,decrement:!0,disabledIndices:x}):Math.max(t,oe(c,{startingIndex:n,decrement:!0,disabledIndices:x})),re(c,O.current)?s(null):s(O.current)}}return l((()=>{a&&(!C&&r&&A.current&&null!=f&&P.current(f),C&&!r&&(cancelAnimationFrame(K.current),O.current=-1,null==D.current||D.current(null)))}),[r,C,f,c,P,D,H,a]),l((()=>{if(a&&r)if(null==i){if(null!=f)return;C&&(O.current=-1,H(c,O)),!C&&A.current&&(null!=M.current||!0===A.current&&null==M.current)&&(O.current=null==M.current||ie(M.current,L,p)||m?le(c,S.current):se(c,S.current),P.current(O.current),H(c,O))}else re(c,i)||(O.current=i,H(c,O))}),[r,C,i,f,m,c,P,H,a,d,L,p,g,S]),l((()=>{a&&!r&&C&&null!=f&&k(u.domReference.current)&&u.domReference.current.focus()}),[u,f,r,C,a]),l((()=>{if(a&&!r&&C){var e,n;const t=null==T||null==(e=T.nodesRef.current.find((e=>e.id===I)))||null==(n=e.context)?void 0:n.refs.floating.current;t&&!t.contains(j(R(t)))&&t.focus({preventScroll:!0})}}),[a,r,C,T,I]),l((()=>{M.current=null})),a?{reference:{...g&&r&&null!=i&&{"aria-activedescendant":N},onKeyDown(e){if(F.current=!0,g&&r)return X(e);(0===e.key.indexOf("Arrow")||"Enter"===e.key||" "===e.key||""===e.key)&&(M.current=e.key),m?function(e,n,t){return ue(n,t?"ArrowLeft"===e:"ArrowRight"===e,"ArrowDown"===e)}(e.key,L,p)&&(V(e),r?(O.current=le(c,x),s(O.current)):o(!0)):ce(e.key,L)&&(null!=f&&(O.current=f),V(e),!r&&w?o(!0):X(e),r&&s(O.current))}},floating:{"aria-orientation":"both"===L?void 0:L,...g&&null!=i&&{"aria-activedescendant":N},onKeyDown:X,onPointerMove(){F.current=!1}},item:{onFocus(e){let{currentTarget:n}=e;const t=c.current.indexOf(n);-1!==t&&s(t)},onClick:e=>{let{currentTarget:n}=e;return n.focus({preventScroll:!0})},...E&&{onMouseMove(e){let{currentTarget:n}=e;const t=n;if(t){const e=c.current.indexOf(t);-1!==e&&s(e)}},onMouseLeave(){var e;F.current||(O.current=-1,H(c,O),P.current(null),g||null==(e=u.floating.current)||e.focus({preventScroll:!0}))}}}}:{}},fe=function(e,n){var r;let{open:o,dataRef:u}=e,{listRef:c,activeIndex:i,onMatch:s=(()=>{}),enabled:a=!0,findMatch:f=null,resetMs:d=1e3,ignoreKeys:v=[],selectedIndex:m=null}=void 0===n?{listRef:{current:[]},activeIndex:null}:n;const p=t.useRef(),g=t.useRef(""),b=t.useRef(null!=(r=null!=m?m:i)?r:-1),h=t.useRef(null);function y(e){if(!e.currentTarget.contains(j(R(e.currentTarget))))return;g.current.length>0&&" "!==g.current[0]&&(u.current.typing=!0," "===e.key&&V(e));const n=c.current;if(null==n||["Home","End","Escape","Enter","Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight",...v].includes(e.key))return;n.every((e=>{var n,t;return!e||(null==(n=e[0])?void 0:n.toLocaleLowerCase())!==(null==(t=e[1])?void 0:t.toLocaleLowerCase())}))&&g.current===e.key&&(g.current="",b.current=h.current),g.current+=e.key,clearTimeout(p.current),p.current=setTimeout((()=>{g.current="",b.current=h.current,u.current.typing=!1}),d);const t=b.current,r=[...n.slice((null!=t?t:0)+1),...n.slice(0,(null!=t?t:0)+1)],o=f?f(r,g.current):r.find((e=>0===(null==e?void 0:e.toLocaleLowerCase().indexOf(g.current)))),i=o?n.indexOf(o):-1;-1!==i&&(s(i),h.current=i)}return l((()=>{o&&(clearTimeout(p.current),h.current=null,g.current="")}),[o]),l((()=>{var e;o&&""===g.current&&(b.current=null!=(e=null!=m?m:i)?e:-1)}),[o,m,i]),a?{reference:{onKeyDown:y},floating:{onKeyDown:y}}:{}};export{Q as FloatingDelayGroup,Y as FloatingFocusManager,E as FloatingNode,K as FloatingOverlay,P as FloatingPortal,w as FloatingTree,O as safePolygon,_ as useClick,Z as useDelayGroup,J as useDelayGroupContext,ne as useDismiss,I as useFloating,y as useFloatingNodeId,b as useFloatingParentNodeId,D as useFloatingPortalNode,h as useFloatingTree,te as useFocus,z as useHover,m as useId,C as useInteractions,ae as useListNavigation,$ as useRole,fe as useTypeahead};
